# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å—Ç–∞—Ç—å—è–º–∏ –≤ sitemap

## –ü—Ä–æ–±–ª–µ–º–∞
–í –∫–∞—Ä—Ç–µ —Å–∞–π—Ç–∞ –ø–æ–ø–∞–¥–∞–ª–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏ –∏–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞ `posts.ts`, –∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ 404:
- `https://webdad.by/blog/hello-world` - 404
- `https://webdad.by/blog/upgrade-crm-integration` - 404  
- `https://webdad.by/blog/upgrade-automation-workflow` - 404

## –ü—Ä–∏—á–∏–Ω–∞
Sitemap –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ª–æ–∫–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é `getAllPosts()` –∏–∑ `posts.ts` –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π –∏–∑ CMS.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω sitemap.ts
```typescript
// –î–û: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç—ã
import { getAllPosts, type Post } from '../lib/posts';
const posts = getAllPosts();

// –ü–û–°–õ–ï: –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ—Å—Ç—ã –∏–∑ CMS
let posts: Array<{ slug: string; date?: string }> = [];
try {
  const { getAllPosts } = await import('../lib/cms/payload');
  const cmsData = await getAllPosts({ limit: 500 });
  posts = cmsData.map(post => ({
    slug: post.slug,
    date: post.date || post.publishedAt
  }));
} catch (error) {
  console.warn('Failed to fetch posts from CMS for sitemap:', error);
  posts = []; // –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –µ—Å–ª–∏ CMS –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
}
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ CMS
- –ï—Å–ª–∏ CMS –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, sitemap –Ω–µ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∞—Ç—å–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- Graceful fallback –∫ –ø—É—Å—Ç–æ–º—É —Å–ø–∏—Å–∫—É —Å—Ç–∞—Ç–µ–π

### 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
```typescript
// –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Ç–∏–ø–∞ Post –∏–∑ posts.ts
const postRoutes: MetadataRoute.Sitemap = posts.map((post) => ({
  url: `${siteUrl}/blog/${post.slug}`,
  lastModified: post.date ? new Date(post.date) : new Date(),
  changeFrequency: 'monthly' as const,
  priority: 0.6,
}));
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –±–ª–æ–≥–∞

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å—Ç–∞—Ç–µ–π:
1. **CMS (–æ—Å–Ω–æ–≤–Ω–æ–π)** - `src/lib/cms/payload.ts`
   - –†–µ–∞–ª—å–Ω—ã–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production

2. **–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç—ã** - `src/lib/posts.ts`
   - –î–µ–º–æ-–∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   - Fallback –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ sitemap

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –±–ª–æ–≥–∞:
- `/blog/page.tsx` - –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç CMS ‚Üí fallback —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ)
- `/blog/[slug]/page.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç—å–∏ (—Ç–æ–ª—å–∫–æ CMS)
- `sitemap.ts` - –ö–∞—Ä—Ç–∞ —Å–∞–π—Ç–∞ (—Ç–æ–ª—å–∫–æ CMS)

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚úÖ –†–µ—à–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–£–±—Ä–∞–Ω—ã 404 —Å—Ç–∞—Ç—å–∏** –∏–∑ sitemap
2. **–¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏** –∏–∑ CMS –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–∞—Ä—Ç—É —Å–∞–π—Ç–∞
3. **Graceful fallback** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ CMS
4. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–∏–ø–æ–≤

### üìä –£–ª—É—á—à–µ–Ω–∏—è SEO:
- –ü–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- Sitemap —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–µ URL
- –£–ª—É—á—à–µ–Ω–∞ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ sitemap

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ü—Ä–æ–≤–µ—Ä–∫–∞ sitemap:
```bash
curl https://webdad.by/sitemap.xml | grep "/blog/"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–µ–π –≤ CMS:
```bash
curl "https://your-cms.com/api/posts?limit=500&where[status][equals]=published"
```

### –õ–æ–≥–∏ –æ—à–∏–±–æ–∫:
–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:
```
Failed to fetch posts from CMS for sitemap: [error details]
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å CMS** –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ sitemap** –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –¥–µ–ø–ª–æ—è
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ revalidation** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–µ–π
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã** –Ω–∞ –æ—à–∏–±–∫–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ CMS
5. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** Google Search Console –Ω–∞ 404 –æ—à–∏–±–∫–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
src/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ posts.ts          # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ—Å—Ç—ã (—Ç–æ–ª—å–∫–æ –¥–ª—è fallback)
‚îÇ   ‚îî‚îÄ‚îÄ cms/
‚îÇ       ‚îî‚îÄ‚îÄ payload.ts    # CMS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–æ—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫)
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ sitemap.ts        # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç CMS
‚îÇ   ‚îî‚îÄ‚îÄ blog/
‚îÇ       ‚îú‚îÄ‚îÄ page.tsx      # CMS + fallback
‚îÇ       ‚îî‚îÄ‚îÄ [slug]/
‚îÇ           ‚îî‚îÄ‚îÄ page.tsx  # –¢–æ–ª—å–∫–æ CMS
```

–¢–µ–ø–µ—Ä—å sitemap —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏–∑ CMS, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å 404 –æ—à–∏–±–∫–∞–º–∏.
